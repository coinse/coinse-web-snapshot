---
layout: page
title: FLUCCS - Using Code and Change Metrics to Improve Fault Localization
---

		<p>
			This page is supplementary to the paper entitled "FLUCCS: Using Code and Change Metrics to Improve Fault Localization", which has been presented at the <a href="http://conf.researchr.org/home/issta-2017">International Symposium on Software Testing and Analysis 2017</a>. This page contains additional results that could not be reported in the paper due to page limits. 
		</p>
		<h3><b>Background</b></h3>
		<p>
			Fault localization aims to support the debugging activities of human developers by highlighting the program elements that are suspected to be responsible for the observed failure. Spectrum Based Fault Localization (SBFL), an existing localization technique that only relies on the coverage and pass/fail results of executed test cases, has been widely studied but also criticized for the lack of precision and limited effort reduction. To overcome restrictions of techniques based purely on coverage, we extend SBFL with code and change metrics that have been studied in the context of defect prediction, such as size, age and code churn. Using suspiciousness values from existing SBFL formulas and these source code metrics as features, we apply two learn-to-rank techniques, Genetic Programming (GP) and linear rank Support Vector Machines (SVMs). We evaluate our approach with a ten-fold cross validation of method level fault localization, using 386 real world faults from the Defects4J repository. GP with additional source code metrics ranks the faulty method at the top for 144 faults, and within the top ten for 304 faults. This is a significant improvement over the state-of-the-art SBFL formulas, the best of which can rank 65 and 212 faults at the top and within the top ten, respectively.
		</p>
		<h3><b>Distribution of Wasted Effort</b></h3>
		<p>
			Our objective is to minimize the effort wasted looking at the non-faulty program elements. We use wasted effort (wef), the absolute count version of the traditional Expense metric. Following histograms describe the overall distribution of wef.
		</p>
		<p>
			These histograms show the distribution of wef values per project. Distribution of wef values for both median and the best performance GP-generated ranking models, denoted as 'med' and 'min' respectively, are shown side by side in these histograms. 
		</p>
                <p>
                        Main idea of FLUCCS, our new fault localization tool, is using code and change metrics, which have been widely used in defect prediction. Two types of histograms, one with code and change metrics and one without them, are shown in below to clarify promising improvement of exploiting code and change metrics in fault localization using FLUCCS with GP as the learning mechanism.
                </p>
		<p>
			<table style="width:60%;">
				<tr>
                                        <td><a href="#hist_Lang" class="inline">Lang</a></td>
				</tr>
                                <tr>
                                        <td><a href="#hist_Math" class="inline">Math</a></td>
                                </tr>
                                <tr>
                                        <td><a href="#hist_Time" class="inline">Time</a></td>
				</tr>
                                <tr>
                                        <td><a href="#hist_Closure" class="inline">Closure</a></td>
                                </tr>
                                <tr>
                                        <td><a href="#hist_Chart" class="inline">Chart</a></td>
                                </tr>
                                <tr>
                                        <td><a href="#hist_Mockito" class="inline">Mockito</a></td>
                                </tr>
			</table>
		</p>
                <p>
                        To further clarify the effect of employing code and change metrics in fault localization, we compare the results of three other learning mechanisms (algorithms) with and without code and change metrics. From these comparisions, we insist that the benefit of using code and change metrics is not limited to GP.
                </p>    
                        <table style="width:60%;">
                                <tr>
                                        <td><a href='#hist_GausPrc' class="inline">Gaussian Process</a></td>
                                </tr>
                                <tr>
                                        <td><a href='#hist_LrankSVM' class="inline">Linear ranking SVM</a></td> 
                                </tr>
                                <tr>
                                        <td><a href='#hist_RF' class="inline">Random Forest</a></td>
                                </tr> 
                        </table>       

		<p>
			FLUCCS uses Method Level Aggregation on SBFL suspiciousness scores to further imporve the accuracy of fault localization. Impact of using Method Level Aggregation (or Method Aggregation) is shown in following histograms of wef for baseline formulas; two cases, with and without Method Aggregation, are described in the histograms side by side.
		</p>
		<p>
			<table style="width:60%;">
				<tr>
					<td><a href="#hist_ER1a" class="inline">ER1a</a></td>
					<td><a href="#hist_ER1b" class="inline">ER1b</a></td>
					<td><a href="#hist_ER5a" class="inline">ER5a</a></td>
					<td><a href="#hist_ER5b" class="inline">ER5b</a></td>
					<td><a href="#hist_ER5c" class="inline">ER5c</a></td>
				</tr>
				<tr>
					<td><a href="#hist_gp02" class="inline">gp02</a></td>
					<td><a href="#hist_gp03" class="inline">gp03</a></td>
					<td><a href="#hist_gp13" class="inline">gp13</a></td>
					<td><a href="#hist_gp19" class="inline">gp19</a></td>
				</tr>
				<tr>
					<td><a href="#hist_ochiai" class="inline">ochiai</a></td>
					<td><a href="#hist_jaccard" class="inline">jaccard</a></td>
				</tr>
			</table>
		</p>
                <p>
                        Above results have been obtained by using the data set which composes of fault data from six different projects (Lang, Math, Time, Closure, Chart, Mockito). Here, we show the cross-project validity for these projects.   
                </p>
                        <table style="width:60%;">
                                <tr>
                                        <td><a href="#hist_CP_Lang" class="inline">Lang</a></td>
                                </tr>  
                                <tr>
                                        <td><a href="#hist_CP_Math" class="inline">Math</a></td>
                                </tr>
                                <tr>
                                        <td><a href="#hist_CP_Time" class="inline">Time</a></td>
                                </tr>
                                <tr>
                                        <td><a href="#hist_CP_Closure" class="inline">Closure</a></td>
                                </tr>
                                <tr>
                                        <td><a href="#hist_CP_Chart" class="inline">Chart</a></td>
                                </tr>
                                <tr>
                                        <td><a href="#hist_CP_Mockito" class="inline">Mockito</a></td>
                                </tr>
                        </table>

		<p>
			All of these histograms are limited to wef values which are smaller or equal to 800 due to hardness of visualization when including large values.
		</p>
                <h3><b>Artifact</b></h3>
                <p>
                        An artifact of FLUCCS, named *defects4j-fluccs*, 
                        contains the implementation of FLUCCS as well as the dataset used to evaluate it in the accompanying paper. 
                        Data sets generated by FLUCCS consist of suspiciousness scores from existing SBFL formulas as well as code and change metric values (age, churn, and complexity).
                        This artifact is uploaded at <a href="https://bitbucket.org/teamcoinse/fluccs">here</a>.
                </p>

                <div style="display:none">
                        <div id="hist_Lang" class="formula">
                                <h2>Lang</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#min">Minimum (best)</a></li>
                                                <li><a href="#med">Median</a></li>
                                        </ul>
                                        <div id="min" class="scatterplots">
                                        	<p><img src="plots/hist_gp_comp/hist.gp.min.Lang.wef.hist.png"/></p>
                                        </div>
					<div id="med" class="scatterplots">
						<p><img src="plots/hist_gp_comp/hist.gp.med.Lang.wef.hist.png"/></p>
					</div>
                                </div>
                        </div>
                        <div id="hist_Math" class="formula">
                                <h2>Math</h2>
                                <div class="tabs">
                                        <ul>
						<li><a href="#min">Minimum (best)</a></li>
                                                <li><a href="#med">Median</a></li>
                                        </ul>
                                        <div id="min" class="scatterplots">
                                        	<p><img src="plots/hist_gp_comp/hist.gp.min.Math.wef.hist.png"/></p>
                                        </div>
					<div id="med" class="scatterplots">
						<p><img src="plots/hist_gp_comp/hist.gp.med.Math.wef.hist.png"/></p>
					</div>
                                </div>
                        </div>
                        <div id="hist_Time" class="formula">
                                <h2>Time</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#min">Minimum (best)</a></li>
                                                <li><a href="#med">Median</a></li>
                                        </ul>
                                                
                                        <div id="min" class="scatterplots">
                                        	<p><img src="plots/hist_gp_comp/hist.gp.min.Time.wef.hist.png"/></p>
                                        </div>
					<div id="med" class="scatterplots">
						<p><img src="plots/hist_gp_comp/hist.gp.med.Time.wef.hist.png"/></p>
					</div>
                                </div>
                        </div>
                        <div id="hist_Closure" class="formula">
				<h2>Closure</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#min">Minimum (best)</a></li>
                                                <li><a href="#med">Median</a></li>
                                        </ul>
                                        <div id="min" class="scatterplots">
                                        	<p><img src="plots/hist_gp_comp/hist.gp.min.Closure.wef.hist.png"/></p>
                                        </div>
					<div id="med" class="scatterplots">
						<p><img src="plots/hist_gp_comp/hist.gp.med.Closure.wef.hist.png"/></p>
					</div>
                                </div>
                        </div>
			<div id="hist_Chart" class="formula">
				<h2>Chart</h2>
				<div class="tabs">
					<ul>
						<li><a href="#min">Minimum (best)</a></li>
						<li><a href="#med">Median</a></li>
					</ul>
					<div id="min" class="scatterplots">
						<p><img src="plots/hist_gp_comp/hist.gp.min.Chart.wef.hist.png"/></p>
					</div>
					<div id="med" class="scatterplots">
						<p><img src="plots/hist_gp_comp/hist.gp.med.Chart.wef.hist.png"/></p>
					</div>
				</div>
			</div>
			<div id="hist_Mockito" class="formula">
				<h2>Mockito</h2>
				<div class="tabs">
					<ul>
						<li><a href="#min">Minimum (best)</a></li>
						<li><a href="#med">Median</a></li>
					</ul>               
					<div id="min" class="scatterplots">
						<p><img src="plots/hist_gp_comp/hist.gp.min.Chart.wef.hist.png"/></p>                                            
					</div>
					<div id="med" class="scatterplots">
						<p><img src="plots/hist_gp_comp/hist.gp.med.Chart.wef.hist.png"/></p>
					</div>
				</div>
			</div>
			<div id="hist_ER1a" class="formula">
				<h2>ER1a</h2>
				<div class="tabs">
					<ul>
						<li><a href="#ER1a_Lang">Lang</a></li>
						<li><a href="#ER1a_Math">Math</a></li>
						<li><a href="#ER1a_Time">Time</a></li>
						<li><a href="#ER1a_Closure">Closure</a></li>
						<li><a href="#ER1a_Chart">Chart</a></li>
						<li><a href="#ER1a_Mockito">Mockito</a></li>
					</ul>
					<div id="ER1a_Lang" class="scatterplots">
						<p><img src="plots/hist_baseline_comp/hist.baseline.ER1a.Lang.wef.hist.png"/></p>
					</div>
					<div id="ER1a_Math" class="scatterplots">
                                                <p><img src="plots/hist_baseline_comp/hist.baseline.ER1a.Math.wef.hist.png"/></p>
                                        </div>
					<div id="ER1a_Time" class="scatterplots">
                                                <p><img src="plots/hist_baseline_comp/hist.baseline.ER1a.Time.wef.hist.png"/></p>
                                        </div>
					<div id="ER1a_Closure" class="scatterplots">
                                                <p><img src="plots/hist_baseline_comp/hist.baseline.ER1a.Closure.wef.hist.png"/></p>
                                        </div>
					<div id="ER1a_Chart" class="scatterplots">
						<p><img src="plots/hist_baseline_comp/hist.baseline.ER1a.Chart.wef.hist.png"/></p>
					</div>
					<div id="ER1a_Mockito" class="scatterplots">
						<p><img src="plots/hist_baseline_comp/hist.baseline.ER1a.Mockito.wef.hist.png"/></p>
					</div>
				</div>
			</div>
                        <div id="hist_ER1b" class="formula">
                                <h2>ER1b</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#ER1b_Lang">Lang</a></li>
                                                <li><a href="#ER1b_Math">Math</a></li>
                                                <li><a href="#ER1b_Time">Time</a></li>
                                                <li><a href="#ER1b_Closure">Closure</a></li>
						<li><a href="#ER1b_Chart">Chart</a><li>
						<li><a href="#ER1b_Mockito">Mockito</a></li>
                                        </ul>
                                        <div id="ER1b_Lang" class="scatterplots">
                                                <p><img src="plots/hist_baseline_comp/hist.baseline.ER1b.Lang.wef.hist.png"/></p>
                                        </div>
                                        <div id="ER1b_Math" class="scatterplots">
                                                <p><img src="plots/hist_baseline_comp/hist.baseline.ER1b.Math.wef.hist.png"/></p>
                                        </div>
                                        <div id="ER1b_Time" class="scatterplots">
                                                <p><img src="plots/hist_baseline_comp/hist.baseline.ER1b.Time.wef.hist.png"/></p>
                                        </div>
                                        <div id="ER1b_Closure" class="scatterplots">
                                                <p><img src="plots/hist_baseline_comp/hist.baseline.ER1b.Closure.wef.hist.png"/></p>
                                        </div>
					<div id="ER1b_Chart" class="scatterplots">
						<p><img src="plots/hist_baseline_comp/hist.baseline.ER1b.Chart.wef.hist.png"/></p>
					</div>
					<div id="ER1b_Mockito" class="scatterplots">
						<p><img src="plots/hist_baseline_comp/hist.baseline.ER1b.Mockito.wef.hist.png"/></p>
					</div>
                                </div>
                        </div>
                        <div id="hist_ER5a" class="formula">
                                <h2>ER5a</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#ER5a_Lang">Lang</a></li>
                                                <li><a href="#ER5a_Math">Math</a></li>
                                                <li><a href="#ER5a_Time">Time</a></li>
                                                <li><a href="#ER5a_Closure">Closure</a></li>
                                        </ul>
                                        <div id="ER5a_Lang" class="scatterplots">
                                                <p><img src="plots/hist_ER5a_Lang.png"/></p>
                                        </div>
                                        <div id="ER5a_Math" class="scatterplots">
                                                <p><img src="plots/hist_ER5a_Math.png"/></p>
                                        </div>
                                        <div id="ER5a_Time" class="scatterplots">
                                                <p><img src="plots/hist_ER5a_Time.png"/></p>
                                        </div>
                                        <div id="ER5a_Closure" class="scatterplots">
                                                <p><img src="plots/hist_ER5a_Closure.png"/></p>
                                        </div>
                                </div>
                        </div>
                        <div id="hist_ER5b" class="formula">
                                <h2>ER5b</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#ER5b_Lang">Lang</a></li>
                                                <li><a href="#ER5b_Math">Math</a></li>
                                                <li><a href="#ER5b_Time">Time</a></li>
                                                <li><a href="#ER5b_Closure">Closure</a></li>
                                        </ul>
                                        <div id="ER5b_Lang" class="scatterplots">
                                                <p><img src="plots/hist_ER5b_Lang.png"/></p>
                                        </div>
                                        <div id="ER5b_Math" class="scatterplots">
                                                <p><img src="plots/hist_ER5b_Math.png"/></p>
                                        </div>
                                        <div id="ER5b_Time" class="scatterplots">
                                                <p><img src="plots/hist_ER5b_Time.png"/></p>
                                        </div>
                                        <div id="ER5b_Closure" class="scatterplots">
                                                <p><img src="plots/hist_ER5b_Closure.png"/></p>
                                        </div>
                                </div>
                        </div>
                        <div id="hist_ER5c" class="formula">
                                <h2>ER5c</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#ER5c_Lang">Lang</a></li>
                                                <li><a href="#ER5c_Math">Math</a></li>
                                                <li><a href="#ER5c_Time">Time</a></li>
                                                <li><a href="#ER5c_Closure">Closure</a></li>
                                        </ul>
                                        <div id="ER5c_Lang" class="scatterplots">
                                                <p><img src="plots/hist_ER5c_Lang.png"/></p>
                                        </div>
                                        <div id="ER5c_Math" class="scatterplots">
                                                <p><img src="plots/hist_ER5c_Math.png"/></p>
                                        </div>
                                        <div id="ER5c_Time" class="scatterplots">
                                                <p><img src="plots/hist_ER5c_Time.png"/></p>
                                        </div>
                                        <div id="ER5c_Closure" class="scatterplots">
                                                <p><img src="plots/hist_ER5c_Closure.png"/></p>
                                        </div>
                                </div>
                        </div>
                        <div id="hist_gp02" class="formula">
                                <h2>gp02</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#gp02_Lang">Lang</a></li>
                                                <li><a href="#gp02_Math">Math</a></li>
                                                <li><a href="#gp02_Time">Time</a></li>
                                                <li><a href="#gp02_Closure">Closure</a></li>
                                        </ul>
                                        <div id="gp02_Lang" class="scatterplots">
                                                <p><img src="plots/hist_gp02_Lang.png"/></p>
                                        </div>
                                        <div id="gp02_Math" class="scatterplots">
                                                <p><img src="plots/hist_gp02_Math.png"/></p>
                                        </div>
                                        <div id="gp02_Time" class="scatterplots">
                                                <p><img src="plots/hist_gp02_Time.png"/></p>
                                        </div>
                                        <div id="gp02_Closure" class="scatterplots">
                                                <p><img src="plots/hist_gp02_Closure.png"/></p>
                                        </div>
                                </div>
                        </div>
			<div id="hist_gp03" class="formula">
                                <h2>gp03</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#gp03_Lang">Lang</a></li>
                                                <li><a href="#gp03_Math">Math</a></li>
                                                <li><a href="#gp03_Time">Time</a></li>
                                                <li><a href="#gp03_Closure">Closure</a></li>
                                        </ul>
                                        <div id="gp03_Lang" class="scatterplots">
                                                <p><img src="plots/hist_gp03_Lang.png"/></p>
                                        </div>
                                        <div id="gp03_Math" class="scatterplots">
                                                <p><img src="plots/hist_gp03_Math.png"/></p>
                                        </div>
                                        <div id="gp03_Time" class="scatterplots">
                                                <p><img src="plots/hist_gp03_Time.png"/></p>
                                        </div>
                                        <div id="gp03_Closure" class="scatterplots">
                                                <p><img src="plots/hist_gp03_Closure.png"/></p>
                                        </div>
                                </div>
                        </div>
			<div id="hist_gp13" class="formula">
                                <h2>gp13</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#gp13_Lang">Lang</a></li>
                                                <li><a href="#gp13_Math">Math</a></li>
                                                <li><a href="#gp13_Time">Time</a></li>
                                                <li><a href="#gp13_Closure">Closure</a></li>
                                        </ul>
                                        <div id="gp13_Lang" class="scatterplots">
                                                <p><img src="plots/hist_gp13_Lang.png"/></p>
                                        </div>
                                        <div id="gp13_Math" class="scatterplots">
                                                <p><img src="plots/hist_gp13_Math.png"/></p>
                                        </div>
                                        <div id="gp13_Time" class="scatterplots">
                                                <p><img src="plots/hist_gp13_Time.png"/></p>
                                        </div>
                                        <div id="gp13_Closure" class="scatterplots">
                                                <p><img src="plots/hist_gp13_Closure.png"/></p>
                                        </div>
                                </div>
                        </div>
			<div id="hist_gp19" class="formula">
                                <h2>gp19</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#gp19_Lang">Lang</a></li>
                                                <li><a href="#gp19_Math">Math</a></li>
                                                <li><a href="#gp19_Time">Time</a></li>
                                                <li><a href="#gp19_Closure">Closure</a></li>
                                        </ul>
                                        <div id="gp19_Lang" class="scatterplots">
                                                <p><img src="plots/hist_gp19_Lang.png"/></p>
                                        </div>
                                        <div id="gp19_Math" class="scatterplots">
                                                <p><img src="plots/hist_gp19_Math.png"/></p>
                                        </div>
                                        <div id="gp19_Time" class="scatterplots">
                                                <p><img src="plots/hist_gp19_Time.png"/></p>
                                        </div>
                                        <div id="gp19_Closure" class="scatterplots">
                                                <p><img src="plots/hist_gp19_Closure.png"/></p>
                                        </div>
                                </div>
                        </div>
			<div id="hist_ochiai" class="formula">
                                <h2>ochiai</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#ochiai_Lang">Lang</a></li>
                                                <li><a href="#ochiai_Math">Math</a></li>
                                                <li><a href="#ochiai_Time">Time</a></li>
                                                <li><a href="#ochiai_Closure">Closure</a></li>
                                        </ul>
                                        <div id="ochiai_Lang" class="scatterplots">
                                                <p><img src="plots/hist_ochiai_Lang.png"/></p>
                                        </div>
                                        <div id="ochiai_Math" class="scatterplots">
                                                <p><img src="plots/hist_ochiai_Math.png"/></p>
                                        </div>
                                        <div id="ochiai_Time" class="scatterplots">
                                                <p><img src="plots/hist_ochiai_Time.png"/></p>
                                        </div>
                                        <div id="ochiai_Closure" class="scatterplots">
                                                <p><img src="plots/hist_ochiai_Closure.png"/></p>
                                        </div>
                                </div>
                        </div>
			<div id="hist_jaccard" class="formula">
                                <h2>jaccard</h2>
                                <div class="tabs">
                                        <ul>
                                                <li><a href="#jaccard_Lang">Lang</a></li>
                                                <li><a href="#jaccard_Math">Math</a></li>
                                                <li><a href="#jaccard_Time">Time</a></li>
                                                <li><a href="#jaccard_Closure">Closure</a></li>
                                        </ul>
                                        <div id="jaccard_Lang" class="scatterplots">
                                                <p><img src="plots/hist_jaccard_Lang.png"/></p>
                                        </div>
                                        <div id="jaccard_Math" class="scatterplots">
                                                <p><img src="plots/hist_jaccard_Math.png"/></p>
                                        </div>
                                        <div id="jaccard_Time" class="scatterplots">
                                                <p><img src="plots/hist_jaccard_Time.png"/></p>
                                        </div>
                                        <div id="jaccard_Closure" class="scatterplots">
                                                <p><img src="plots/hist_jaccard_Closure.png"/></p>
                                        </div>
                                </div>
                        </div>
			<div id="hist_GausPrc" class="formula">
				<h2>Gaussian Process</h2>
				<div class="tabs">
					<ul>
						<li><a href="#Lang">Lang (best)</a></li>
						<li><a href="#Math">Math (best)</a></li>
						<li><a href="#Time">Time (best)</a></li>
						<li><a href="#Closure">Closure (best)</a></li>
						<li><a href="#Chart">Chart (best)</a></li>
						<li><a href="#Mockito">Mockito (best)</a></li>
					</ul>
					<div id="Lang" class="scatterplots">
						<p><img src="plots/hist_other_algos_comp/hist.GausPrc.min.Lang.wef.hist.png"/></p>
					</div>
					<div id="Math" class="scatterplots">
						<p><img src="plots/hist_other_algos_comp/hist.GausPrc.min.Math.wef.hist.png"/></p>
					</div>
					<div id="Time" class="scatterplots">
						<p><img src="plots/hist_other_algos_comp/hist.GausPrc.min.Time.wef.hist.png"/></p>
					</div>
					<div id="Closure" class="scatterplots">
						<p><img src="plots/hist_other_algos_comp/hist.GausPrc.min.Closure.wef.hist.png"/></p>
					</div>
					<div id="Chart" class="scatterplots">
						<p><img src="plots/hist_other_algos_comp/hist.GausPrc.min.Chart.wef.hist.png"/></p>
					</div>
					<div id="Mockito" class="scatterplots">
						<p><img src="plots/hist_other_algos_comp/hist.GausPrc.min.Mockito.wef.hist.png"/></p>
					</div>
				</div>
			</div>
			<div id="hist_LrankSVM" class="formula">
			</div>
			<div id="hist_RF" class="formula">
			</div>

			<div id="hist_CP_Lang" class="formula">
			</div>
			<div id="hist_CP_Math" class="formula">
			</div>
			<div id="hist_CP_Time" class="formula">
			</div>
			<div id="hist_CP_Closure" class="formula">
			</div>
			<div id="hist_CP_Chart" class="formula">
			</div>
			<div id="hist_CP_Mockito" class="formula">
			</div>
		</div>
